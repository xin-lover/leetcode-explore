//leetcode 560 和为k的子数组

#include <cstdio>
#include <vector>
#include <unordered_map>

using namespace std;

int subarraySum(vector<int>& nums, int k) {
    
    //思路：使用滑动窗口
    //k和数组都不一定是正整数，这个思路不行
    // int res = 0;
    // int left = 0,right = 0;
    // int sum = 0;
    // while(right < nums.size())
    // {
    //     sum += nums[right];
    //     if(sum == k)
    //     {
    //         ++res;
    //     }
    //     else if(sum > k)
    //     {
    //         while(sum > k)
    //         {
    //             sum -= nums[left];
    //             ++left;
    //             if(sum == k)
    //             {
    //                 ++res;
    //             }
    //         }
    //     }
    //     else
    //     {
    //         //do nothin
    //     }
        
    //     printf("%d\n",left);
    //     ++right;
    // }

    // return res;

    //暴力破解
    // int res = 0;
    // for(int i=0;i<nums.size();++i)
    // {
    //     int s = 0;
    //     for(int j=i;j<nums.size();++j)
    //     {
    //         s += nums[j];
    //         if(s == k)
    //         {
    //             ++res;
    //         }
    //     }
    // }

    // return res;

    unordered_map<int,int> um;
    um[0]=1;
    int sum = 0;
    int res = 0;
    for(int i=0;i<nums.size();++i)
    {
        sum += nums[i];
        if(um.find(sum-k) != um.end())
        {
            res += um[sum-k];
        }
        
        if(um.find(sum) != um.end())
        {
            ++um[sum];
        }
        else
        {
            um[sum] = 1;
        }
        
        
    }

    return res;
}

int main()
{
    // vector<int> v = {-174,703,438,871,-241,781,429,-215,177,273,-628,106,235,-410,145,-793,-451,913,807,596,-982,709,585,-629,966,623,947,-467,-405,552,-858,8,-252,-128,-659,-233,-836,588,324,-817,175,-329,510,-388,878,398,231,730,66,-528,857,383,928,-924,199,-750,-868,-652,-133,408,391,685,483,-31,-986,945,271,778,-96,677,-961,-130,990,-891,-431,-317,-676,479,-919,-20,-814,3,-89,34,-292,548,201,-119,-94,-442,-934,-491,208,-722,115,527,73,636,-681,857};
    vector<int> v = {1,2,3};

    printf("%d\n",subarraySum(v,5));
    return 0;
}

// [-174,703,438,871,-241,781,429,-215,177,273,-628,106,235,-410,145,-793,-451,913,807,596,-982,709,585,-629,966,623,947,-467,-405,552,-858,8,-252,-128,-659,-233,-836,588,324,-817,175,-329,510,-388,878,398,231,730,66,-528,857,383,928,-924,199,-750,-868,-652,-133,408,391,685,483,-31,-986,945,271,778,-96,677,-961,-130,990,-891,-431,-317,-676,479,-919,-20,-814,3,-89,34,-292,548,201,-119,-94,-442,-934,-491,208,-722,115,527,73,636,-681,857]
// -469

